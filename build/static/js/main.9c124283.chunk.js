(this["webpackJsonpchat-ts"]=this["webpackJsonpchat-ts"]||[]).push([[0],{164:function(e,t,s){},192:function(e,t,s){},198:function(e,t,s){},199:function(e,t,s){},200:function(e,t,s){},204:function(e,t){},206:function(e,t){},216:function(e,t){},218:function(e,t){},245:function(e,t){},247:function(e,t){},248:function(e,t){},253:function(e,t){},255:function(e,t){},261:function(e,t){},263:function(e,t){},282:function(e,t){},294:function(e,t){},297:function(e,t){},300:function(e,t,s){},301:function(e,t,s){},302:function(e,t,s){},303:function(e,t,s){},304:function(e,t,s){},305:function(e,t,s){},306:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(155),i=s.n(a),r=(s(164),s(4)),u=s(156),o=s.n(u),l=s(48),j=s(5),m=(s(192),s(1)),b=function(e){var t=e.socket,s=e.setUsernameGL,c=Object(n.useState)(new Audio("/assets/audio/typing_key_2.mp3")),a=Object(r.a)(c,1)[0],i=Object(j.f)(),u=Object(n.useState)(""),o=Object(r.a)(u,2),l=o[0],b=o[1],f=Object(n.useState)(!1),d=Object(r.a)(f,2),O=d[0],g=d[1],x=function(){null!==l&""!==l&&(t.emit("setUsername",l),t.emit("getUsers"),s(l),b(""),i.push("/intro"))};return Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{className:"input-login w-full bg-gray-100 px-4 py-3",onChange:function(e){e.target.value.length>0?g(!0):g(!1),b(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&x(),a.play()},value:l,type:"text",placeholder:"Entrez votre nom..."}),Object(m.jsx)("input",{onClick:x,className:"btn-login ".concat(O?"active":""),type:"submit",value:"Let's go"})]})},f=function(e){var t=e.socket,s=(e.username,e.setUsername);return Object(m.jsxs)("div",{className:"h-screen flex flex-col justify-center items-center",children:[Object(m.jsx)("img",{style:{maxWidth:1e3},className:"w-full",src:"/assets/logo.svg",alt:"Babel's Code"}),Object(m.jsx)("h1",{className:"heading-login mt-12 text-white",children:"Type your pseudo"}),Object(m.jsx)(b,{socket:t,setUsernameGL:s})]})},d=s(57),O=s(310),g=(s(198),function(e){var t=e.id,s=e.name;return Object(m.jsx)("div",{className:"box-user",children:Object(m.jsx)("p",{children:s})},t)}),x=(s(199),function(e){var t=e.socket,s=e.usernameGL,c=e.mode,a=Object(n.useState)([]),i=Object(r.a)(a,2),u=i[0],o=i[1],l=Object(n.useState)(0),j=Object(r.a)(l,2),b=j[0],f=j[1];return Object(n.useEffect)((function(){t.on("users",(function(e){f(e.filter((function(e){return"Anonymous"===e.name})).length),o(e)})),t.on("updateUsername",(function(e){o((function(t){return t.map((function(t){return t.id===e.id?e:t}))}))})),t.on("userConnection",(function(e){"Anonymous"===e.name&&f((function(e){return e+1})),o((function(t){return[].concat(Object(d.a)(t),[e])}))})),t.on("userDisconnection",(function(e){o((function(t){return t.filter((function(t){return t.id!==e.id}))}))})),t.emit("getUsers")}),[]),Object(m.jsxs)(O.a.div,{drag:"Chaos"===c,children:[Object(m.jsxs)("div",{className:"global-username mt-10 flex gap-3",children:[Object(m.jsx)("img",{src:"/assets/user.svg",alt:""}),Object(m.jsx)("p",{style:{transform:"translateY(0.1em)"},className:"block",children:s||"Anonymous"})]}),Object(m.jsx)("p",{className:"mt-6 heading-list-users",children:"Users online :"}),Object(m.jsx)("div",{className:"list-users mt-4",children:Object(m.jsxs)("div",{className:"flex flex-col items-end",children:[u.sort((function(e,t){return e.name.localeCompare(t.name)})).filter((function(e){return"Anonymous"!==e.name&&""!==e.name})).map((function(e){return Object(m.jsx)(g,{name:e.name},e.id)})),0!==b&&Object(m.jsx)(g,{name:"Anonymous x".concat(b)})]})})]})}),h=s(159),p=(s(200),function(e){var t=e.value,s=e.auteur,c=e.fromClient,a=e.mode,i=e.fnHurt,u=e.fnDestruction,o=Object(n.useState)(3),l=Object(r.a)(o,2),j=l[0],b=l[1],f=Object(n.useState)(!1),d=Object(r.a)(f,2),O=d[0],g=d[1];return Object(m.jsxs)("div",{onClick:function(){"Destruction"===a&&(j>=1&&b((function(e){return e-1})),1===j?u():(i(),g(!0),setTimeout((function(){g(!1)}),1e3)))},className:"box-message ".concat(0===j?"disabled":""," ").concat(c?"fromClient":""," ").concat(O?"hit":""),children:[Object(m.jsx)("img",{className:"glitch",src:"/assets/glitch-message.svg",alt:""}),Object(m.jsxs)("div",{className:"flex flex-col ".concat(c?"items-end":"items-start"),children:[Object(m.jsxs)("div",{className:"box-auteur-message",children:[Object(m.jsxs)("p",{children:[s," :"]}),Object(m.jsxs)("div",{className:"px-4 flex items-center gap-2",children:[j>=1?Object(m.jsx)("img",{src:"/assets/heart-full.svg",alt:""}):Object(m.jsx)("img",{src:"/assets/heart-empty.svg",alt:""}),j>=2?Object(m.jsx)("img",{src:"/assets/heart-full.svg",alt:""}):Object(m.jsx)("img",{src:"/assets/heart-empty.svg",alt:""}),3===j?Object(m.jsx)("img",{src:"/assets/heart-full.svg",alt:""}):Object(m.jsx)("img",{src:"/assets/heart-empty.svg",alt:""})]})]}),Object(m.jsx)("p",{className:"box-content-message",children:t}),c&&Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"eye"})})]})]})});p.defaultProps={fromClient:!0};var v=p,y=(s(102),s(300),function(e){var t=e.socket,s=e.mode,c=e.fnHurtMe,a=(Object(n.useRef)(0),Object(n.useRef)(null)),i=Object(n.useState)({}),u=Object(r.a)(i,2),o=u[0],l=u[1],j=Object(n.useState)(new Audio("/assets/audio/destruction.mp3")),b=Object(r.a)(j,1)[0],f=Object(n.useState)(new Audio("/assets/audio/hurt-villager.mp3")),O=Object(r.a)(f,1)[0],g=function(){b.play()};return Object(n.useEffect)((function(){t.on("messages",(function(e){var t=e.filter((function(e){return"string"===typeof e.value}));l(t)})),t.on("message",(function(e){"string"===typeof e.value&&l((function(t){var s=Object(h.a)({},t);return s[e.id]=e,s}))})),t.emit("getMessages")}),[t]),Object(n.useEffect)((function(){a.current.scrollIntoView({behavior:"smooth"})}),[o]),Object(m.jsxs)("div",{style:{maxHeight:"80vh"},className:"chatbox m-auto pr-4 overflow-x-hidden overflow-y-auto",children:[Object(d.a)(Object.values(o)).sort((function(e,t){return e.time-t.time})).filter((function(e){return e.value.length<500})).map((function(e){return Object(m.jsx)(v,{value:e.value,auteur:e.user.name,date:new Date(e.time).toLocaleTimeString(),fromClient:e.user.id===t.id,mode:s,fnHurt:function(){e.user.id===t.id?c():O.play()},fnDestruction:g},e.id)})),Object(m.jsx)("div",{ref:a})]})}),N=(s(301),function(e){var t=e.glitchAppear,s=e.socket,c=Object(n.useState)(""),a=Object(r.a)(c,2),i=a[0],u=a[1],o=Object(n.useState)(new Audio("/assets/audio/typing_key_2.mp3")),l=Object(r.a)(o,1)[0],j=Object(n.useState)(new Audio("/assets/audio/send-message.mp3")),b=Object(r.a)(j,1)[0],f=function(){null!==i&&""!==i&&(s.emit("message",i),u(""),t(),b.play())};return Object(m.jsx)("div",{className:"send-container mt-4",children:Object(m.jsxs)("div",{className:"flex",children:[Object(m.jsx)("input",{onChange:function(e){return u(e.target.value)},onKeyPress:function(){l.play()},onKeyDown:function(e){"Enter"===e.key&&f()},className:"w-full p-4 border-l border-t border-b",type:"text",value:i,placeholder:"Votre message..."}),Object(m.jsx)("input",{onClick:f,className:"btn-send p-4 border cursor-pointer",type:"submit",value:" "})]})})}),w=(s(302),function(){var e=Object(n.useState)(1),t=Object(r.a)(e,2),s=t[0],c=t[1];return Object(n.useEffect)((function(){c(Math.floor(1*Math.random())+1)}),[]),Object(m.jsx)("div",{className:"glitch",children:Object(m.jsx)("img",{src:"/assets/glitch".concat(s,".png"),alt:"Glitch"})})}),k=function(){return Object(m.jsx)("div",{className:"w-full h-screen fixed left-0 top-0 z-50",children:Object(m.jsx)("img",{className:"w-full h-full",src:"/assets/overlay-hurt/overlay-1.png",alt:""})})},S=function(e){var t=e.setMode;return Object(m.jsxs)("div",{className:"mt-6 pr-12 flex justify-end gap-6",children:[Object(m.jsx)("div",{onClick:function(){return t("Destruction")},children:Object(m.jsx)("img",{className:"h-12",src:"/assets/sword.svg",alt:""})}),Object(m.jsx)("div",{onClick:function(){return t("Light")},children:Object(m.jsx)("img",{className:"h-12",src:"/assets/light.svg",alt:""})})]})},C=(s(303),function(e){var t=e.socket,s=e.username,c=(e.setUsername,e.fnAudio),a=e.fnToggleAudio,i=e.audioState,u=Object(n.useState)(!1),o=Object(r.a)(u,2),l=o[0],j=o[1],b=Object(n.useState)(!1),f=Object(r.a)(b,2),d=f[0],O=f[1],g=Object(n.useState)("Normal"),h=Object(r.a)(g,2),p=h[0],v=h[1],C=Object(n.useState)(!1),A=Object(r.a)(C,2),D=A[0],E=A[1],T=Object(n.useState)(new Audio("/assets/audio/hurt-villager.mp3")),U=Object(r.a)(T,1)[0];Object(n.useEffect)((function(){c()}),[]);return Object(m.jsx)("div",{className:"".concat("Destruction"===p&&"cursor-sword"," wrapper m-auto px-10 flex"),children:t?Object(m.jsxs)(m.Fragment,{children:[l&&Object(m.jsx)(w,{}),d&&Object(m.jsx)(k,{}),Object(m.jsxs)("div",{className:"w-full h-screen flex relative",children:[Object(m.jsxs)("div",{className:"menu-side ".concat(D?"active":""," w-4/5 h-screen md:w-1/3 lg:w-1/4 bg-black md:bg-transparent pr-6 pt-10"),children:[Object(m.jsxs)("div",{className:"flex justify-between",children:[i?Object(m.jsx)("img",{className:"toggleAudio",onClick:a,src:"/assets/audio.svg",alt:"Couper l'audio"}):Object(m.jsx)("img",{className:"toggleAudio",onClick:a,src:"/assets/audio-off.svg",alt:"R\xe9tablir l'audio"}),Object(m.jsx)("img",{className:"icon-burger hidden",onClick:function(){return E(!1)},src:"/assets/burger-menu.svg",alt:""})]}),Object(m.jsx)(x,{socket:t,usernameGL:s,mode:p}),Object(m.jsx)(S,{setMode:v})]}),Object(m.jsxs)("div",{className:"w-full md:w-2/3 lg:w-3/4 pt-10",children:[Object(m.jsx)("img",{className:"icon-burger h-6 hidden mb-8",onClick:function(){return E(!0)},src:"/assets/burger-menu-close.svg",alt:""}),Object(m.jsx)(y,{socket:t,mode:p,fnHurtMe:function(){U.play(),O(!0),setTimeout((function(){O(!1)}),200)}}),Object(m.jsx)(N,{glitchAppear:function(){j(!0),setTimeout((function(){j(!1)}),200)},socket:t})]})]})]}):Object(m.jsx)("div",{children:"Not Connected"})})}),A=(s(304),function(e){var t=e.username,s=e.fnAudio,c=Object(n.useState)(new Audio("/assets/audio/destruction.mp3")),a=Object(r.a)(c,1)[0],i=Object(n.useState)(!1),u=Object(r.a)(i,2),o=u[0],j=u[1],b=Object(n.useRef)();return Object(n.useEffect)((function(){a.play(),j(!0),setTimeout((function(){j(!1)}),100),setInterval((function(){j(!0),setTimeout((function(){j(!1)}),100)}),8e3),s()}),[]),Object(m.jsxs)(m.Fragment,{children:[o&&Object(m.jsx)(w,{}),Object(m.jsxs)("div",{className:"h-screen px-10 flex flex-col justify-center items-center text-white",children:[Object(m.jsx)("img",{style:{maxWidth:1e3},className:"w-full",src:"/assets/logo.svg",alt:"Babel's Code"}),Object(m.jsxs)("h1",{className:"heading-intro",children:["Welcome ",Object(m.jsx)("span",{ref:b,children:t})]}),Object(m.jsxs)("p",{className:"sentence-intro flex items-center gap-4",children:[Object(m.jsx)("img",{className:"h-4",src:"/assets/terminal.svg",alt:""})," It's time to unlock the universe's secret..."]}),Object(m.jsxs)("p",{className:"sentence-intro flex items-center gap-4",children:[Object(m.jsx)("img",{className:"h-4",src:"/assets/terminal.svg",alt:""})," Don't be afraid to lose your mind..."]}),Object(m.jsxs)(l.b,{className:"btn-intro",to:"/general",children:[Object(m.jsx)("img",{src:"/assets/user.svg",alt:""})," Got it"]})]})]})});s(305);var D=function(){var e=Object(n.useState)(new Audio("/assets/audio/intro.mp3")),t=Object(r.a)(e,1)[0],s=Object(n.useState)(new Audio("/assets/audio/together.mp3")),c=Object(r.a)(s,1)[0],a=Object(n.useState)(!0),i=Object(r.a)(a,2),u=i[0],b=i[1],d=Object(n.useState)(null),O=Object(r.a)(d,2),g=O[0],x=O[1],h=Object(n.useState)(""),p=Object(r.a)(h,2),v=p[0],y=p[1];return Object(n.useEffect)((function(){var e=o()("https://whispering-chamber-09886.herokuapp.com");return x(e),function(){return e.close()}}),[x]),Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.c,{children:[Object(m.jsx)(j.a,{path:"/general",children:Object(m.jsx)(C,{fnAudio:function(){t.pause(),c.play()},fnToggleAudio:function(){u?c.pause():c.play(),b(!u)},audioState:u,socket:g,username:v,setUsername:y})}),Object(m.jsx)(j.a,{path:"/intro",children:Object(m.jsx)(A,{fnAudio:function(){t.play()},username:v})}),Object(m.jsx)(j.a,{exact:!0,path:"/",children:Object(m.jsx)(f,{socket:g,username:v,setUsername:y})})]})})},E=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,311)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;s(e),n(e),c(e),a(e),i(e)}))};i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(D,{})}),document.getElementById("root")),E()}},[[306,1,2]]]);
//# sourceMappingURL=main.9c124283.chunk.js.map