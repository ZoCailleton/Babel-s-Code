(this["webpackJsonpchat-ts"]=this["webpackJsonpchat-ts"]||[]).push([[0],{165:function(e,t,s){},193:function(e,t,s){},199:function(e,t,s){},200:function(e,t,s){},201:function(e,t,s){},205:function(e,t){},207:function(e,t){},217:function(e,t){},219:function(e,t){},246:function(e,t){},248:function(e,t){},249:function(e,t){},254:function(e,t){},256:function(e,t){},262:function(e,t){},264:function(e,t){},283:function(e,t){},295:function(e,t){},298:function(e,t){},301:function(e,t,s){},302:function(e,t,s){},303:function(e,t,s){},304:function(e,t,s){},305:function(e,t,s){},306:function(e,t,s){},307:function(e,t,s){},308:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(156),i=s.n(a),o=(s(165),s(4)),r=s(157),u=s.n(r),l=s(48),j=s(5),d=(s(193),s(1)),m=function(e){var t=e.socket,s=e.setUsernameGL,c=Object(n.useState)(new Audio("/assets/audio/typing_key_2.mp3")),a=Object(o.a)(c,1)[0],i=Object(j.f)(),r=Object(n.useState)(""),u=Object(o.a)(r,2),l=u[0],m=u[1],b=Object(n.useState)(!1),f=Object(o.a)(b,2),O=f[0],h=f[1],x=function(){null!==l&""!==l&&(t.emit("setUsername",l),t.emit("getUsers"),s(l),m(""),i.push("/intro"))};return Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{className:"input-login w-full bg-gray-100 px-4 py-3",onChange:function(e){e.target.value.length>0?h(!0):h(!1),m(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&x(),a.play()},value:l,type:"text",placeholder:"Entrez votre nom..."}),Object(d.jsx)("input",{onClick:x,className:"btn-login ".concat(O?"active":""),type:"submit",value:"Let's go"})]})},b=function(e){var t=e.socket,s=(e.username,e.setUsername);return Object(d.jsxs)("div",{className:"h-screen px-6 flex flex-col justify-center items-center",children:[Object(d.jsx)("img",{style:{maxWidth:1e3},className:"w-full",src:"/assets/logo.svg",alt:"Babel's Code"}),Object(d.jsx)("h1",{className:"heading-login mt-12 text-white",children:"Type your pseudo"}),Object(d.jsx)(m,{socket:t,setUsernameGL:s})]})},f=s(58),O=s(311),h=(s(199),function(e){var t=e.id,s=e.name,n=e.mode;return Object(d.jsx)(O.a.div,{drag:"Chaos"===n,className:"box-user",children:Object(d.jsx)("p",{children:s})},t)}),x=(s(200),function(e){var t=e.socket,s=e.usernameGL,c=e.mode,a=Object(n.useState)([]),i=Object(o.a)(a,2),r=i[0],u=i[1],l=Object(n.useState)(0),j=Object(o.a)(l,2),m=j[0],b=j[1];return Object(n.useEffect)((function(){t.on("users",(function(e){b(e.filter((function(e){return"Anonymous"===e.name})).length),u(e)})),t.on("updateUsername",(function(e){u((function(t){return t.map((function(t){return t.id===e.id?e:t}))}))})),t.on("userConnection",(function(e){"Anonymous"===e.name&&b((function(e){return e+1})),u((function(t){return[].concat(Object(f.a)(t),[e])}))})),t.on("userDisconnection",(function(e){u((function(t){return t.filter((function(t){return t.id!==e.id}))}))})),t.emit("getUsers")}),[]),Object(d.jsxs)(O.a.div,{drag:"Chaos"===c,dragConstraints:{left:-100,bottom:0,right:1200},children:[Object(d.jsxs)("div",{className:"global-username mt-10 flex gap-3",children:[Object(d.jsx)("img",{src:"/assets/user.svg",alt:""}),Object(d.jsx)("p",{style:{transform:"translateY(0.1em)"},className:"block",children:s||"Anonymous"})]}),Object(d.jsx)("p",{className:"mt-6 heading-list-users",children:"Users online :"}),Object(d.jsx)("div",{className:"list-users mt-4",children:Object(d.jsxs)("div",{className:"flex flex-col items-end",children:[r.sort((function(e,t){return e.name.localeCompare(t.name)})).filter((function(e){return"Anonymous"!==e.name&&""!==e.name})).map((function(e){return Object(d.jsx)(h,{name:e.name,mode:c},e.id)})),0!==m&&Object(d.jsx)(h,{name:"Anonymous x".concat(m)})]})})]})}),g=s(160),p=(s(201),function(e){var t=e.value,s=e.auteur,c=e.fromClient,a=e.mode,i=e.fnHurt,r=e.fnDestruction,u=Object(n.useState)(3),l=Object(o.a)(u,2),j=l[0],m=l[1],b=Object(n.useState)(!1),f=Object(o.a)(b,2),h=f[0],x=f[1];return Object(d.jsxs)(O.a.div,{onClick:function(){"Destruction"===a&&(j>=1&&m((function(e){return e-1})),1===j?r():(i(),x(!0),setTimeout((function(){x(!1)}),1e3)))},drag:"Chaos"===a,className:"box-message ".concat(0===j?"disabled":""," ").concat(c?"fromClient":""," ").concat(h?"hit":""),children:[Object(d.jsx)("img",{className:"glitch",src:"/assets/glitch-message.svg",alt:""}),Object(d.jsxs)("div",{className:"flex flex-col ".concat(c?"items-end":"items-start"),children:[Object(d.jsxs)("div",{className:"box-auteur-message",children:[Object(d.jsxs)("p",{children:[s," :"]}),Object(d.jsxs)("div",{className:"px-4 flex items-center gap-2",children:[j>=1?Object(d.jsx)("img",{src:"/assets/heart-full.svg",alt:""}):Object(d.jsx)("img",{src:"/assets/heart-empty.svg",alt:""}),j>=2?Object(d.jsx)("img",{src:"/assets/heart-full.svg",alt:""}):Object(d.jsx)("img",{src:"/assets/heart-empty.svg",alt:""}),3===j?Object(d.jsx)("img",{src:"/assets/heart-full.svg",alt:""}):Object(d.jsx)("img",{src:"/assets/heart-empty.svg",alt:""})]})]}),Object(d.jsx)("p",{className:"box-content-message",children:t}),c&&Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"eye"})})]})]})});p.defaultProps={fromClient:!0};var v=p,y=(s(103),s(301),function(e){var t=e.socket,s=e.mode,c=e.fnHurtMe,a=(Object(n.useRef)(0),Object(n.useRef)(null)),i=Object(n.useState)({}),r=Object(o.a)(i,2),u=r[0],l=r[1],j=Object(n.useState)(new Audio("/assets/audio/destruction.mp3")),m=Object(o.a)(j,1)[0],b=Object(n.useState)(new Audio("/assets/audio/hurt-villager.mp3")),O=Object(o.a)(b,1)[0],h=function(){m.play()};return Object(n.useEffect)((function(){t.on("messages",(function(e){var t=e.filter((function(e){return"string"===typeof e.value}));l(t)})),t.on("message",(function(e){"string"===typeof e.value&&l((function(t){var s=Object(g.a)({},t);return s[e.id]=e,s}))})),t.emit("getMessages")}),[t]),Object(n.useEffect)((function(){a.current.scrollIntoView({behavior:"smooth"})}),[u]),Object(d.jsxs)("div",{className:"chatbox m-auto pr-4 overflow-x-hidden overflow-y-auto",children:[Object(f.a)(Object.values(u)).sort((function(e,t){return e.time-t.time})).filter((function(e){return e.value.length<500})).map((function(e){return Object(d.jsx)(v,{value:e.value,auteur:e.user.name,date:new Date(e.time).toLocaleTimeString(),fromClient:e.user.id===t.id,mode:s,fnHurt:function(){e.user.id===t.id?c():O.play()},fnDestruction:h},e.id)})),Object(d.jsx)("div",{ref:a})]})}),N=(s(302),function(e){var t=e.glitchAppear,s=e.socket,c=e.mode,a=e.setMode,i=Object(n.useState)(""),r=Object(o.a)(i,2),u=r[0],l=r[1],j=Object(n.useState)(new Audio("/assets/audio/typing_key_2.mp3")),m=Object(o.a)(j,1)[0],b=Object(n.useState)(new Audio("/assets/audio/send-message.mp3")),f=Object(o.a)(b,1)[0],h=Object(n.useState)(0),x=Object(o.a)(h,2),g=x[0],p=x[1],v=function(){null!==u&&""!==u?(s.emit("message",u),l(""),t(),f.play()):10===g?(p(0),a("Chaos")):p(g+1)};return Object(d.jsx)(O.a.div,{drag:"Chaos"===c,dragConstraints:{left:-700,right:300,top:-800,bottom:100},className:"send-container mt-4",children:Object(d.jsxs)("div",{className:"flex",children:[Object(d.jsx)("input",{onChange:function(e){return l(e.target.value)},onKeyPress:function(){m.play()},onKeyDown:function(e){"Enter"===e.key&&v()},className:"w-full p-4 border-l border-t border-b",type:"text",value:u,placeholder:"Votre message..."}),Object(d.jsx)("input",{onClick:v,className:"".concat("Chaos"===c?"active":""," btn-send p-4 border cursor-pointer"),type:"submit",value:" "})]})})}),w=(s(303),function(){var e=Object(n.useState)(1),t=Object(o.a)(e,2),s=t[0],c=t[1];return Object(n.useEffect)((function(){c(Math.floor(1*Math.random())+1)}),[]),Object(d.jsx)("div",{className:"glitch",children:Object(d.jsx)("img",{src:"/assets/glitch".concat(s,".png"),alt:"Glitch"})})}),C=(s(304),function(e){var t=e.setGodMode,s=e.fnAudioChaos;return Object(d.jsx)("div",{className:"w-full h-screen bg-black bg-opacity-75 flex justify-center items-center fixed left-0 top-0 z-50",children:Object(d.jsxs)("div",{className:"godMode w-full max-w-xl",children:[Object(d.jsxs)("p",{className:"message",children:["Congrats ! You have unlocked ",Object(d.jsx)("span",{children:"the chaos mode"})]}),Object(d.jsx)("div",{className:"btn-chaos-mode",onClick:function(){t(!1),s()},children:"&!$%\xa3+/"})]})})}),k=function(){return Object(d.jsx)("div",{className:"w-full h-screen fixed left-0 top-0 z-50",children:Object(d.jsx)("img",{className:"w-full h-full",src:"/assets/overlay-hurt/overlay-1.png",alt:""})})},S=function(e){var t=e.mode,s=e.setMode;return Object(d.jsx)(O.a.div,{drag:"Chaos"===t,className:"mt-6 pr-12 flex justify-end gap-6",children:Object(d.jsx)("div",{onClick:function(){return s("Destruction")},children:Object(d.jsx)("img",{className:"h-12",src:"/assets/sword.svg",alt:""})})})},A=(s(305),function(e){var t=e.socket,s=e.username,c=(e.setUsername,e.fnToggleAudio),a=e.audioState,i=e.fnAudioChaos,r=Object(n.useState)(!1),u=Object(o.a)(r,2),l=u[0],j=u[1],m=Object(n.useState)(!1),b=Object(o.a)(m,2),f=b[0],O=b[1],h=Object(n.useState)("Normal"),g=Object(o.a)(h,2),p=g[0],v=g[1],A=Object(n.useState)(!1),M=Object(o.a)(A,2),D=M[0],T=M[1],U=Object(n.useState)(!0),E=Object(o.a)(U,2),G=E[0],L=E[1],F=Object(n.useState)(new Audio("/assets/audio/hurt-villager.mp3")),I=Object(o.a)(F,1)[0];return Object(d.jsx)("div",{className:"".concat("Destruction"===p&&"cursor-sword"," ").concat("Chaos"===p&&"cursor-chaos"," wrapper m-auto px-10 flex"),children:t?Object(d.jsxs)(d.Fragment,{children:[l&&Object(d.jsx)(w,{}),f&&Object(d.jsx)(k,{}),"Chaos"===p&&G&&Object(d.jsx)(C,{setGodMode:L,fnAudioChaos:i}),Object(d.jsxs)("div",{className:"w-full h-screen flex relative",children:[Object(d.jsxs)("div",{className:"menu-side ".concat(D?"active":""," w-4/5 h-screen md:w-1/3 lg:w-1/4 bg-black md:bg-transparent pr-6 pt-10"),children:[Object(d.jsxs)("div",{className:"flex justify-between",children:[a?Object(d.jsx)("img",{className:"toggleAudio",onClick:c,src:"/assets/audio.svg",alt:"Couper l'audio"}):Object(d.jsx)("img",{className:"toggleAudio",onClick:c,src:"/assets/audio-off.svg",alt:"R\xe9tablir l'audio"}),Object(d.jsx)("img",{className:"icon-burger hidden",onClick:function(){return T(!1)},src:"/assets/burger-menu.svg",alt:""})]}),Object(d.jsx)(x,{socket:t,usernameGL:s,mode:p}),Object(d.jsx)(S,{mode:p,setMode:v})]}),Object(d.jsxs)("div",{className:"w-full md:w-2/3 lg:w-3/4 pt-10",children:[Object(d.jsx)("img",{className:"icon-burger h-6 hidden mb-8",onClick:function(){return T(!0)},src:"/assets/burger-menu-close.svg",alt:""}),Object(d.jsx)(y,{socket:t,mode:p,fnHurtMe:function(){I.play(),O(!0),setTimeout((function(){O(!1)}),200)}}),Object(d.jsx)(N,{glitchAppear:function(){j(!0),setTimeout((function(){j(!1)}),200)},socket:t,mode:p,setMode:v})]})]})]}):Object(d.jsx)("div",{children:"Not Connected"})})}),M=(s(306),function(e){var t=e.username,s=e.fnAudio,c=Object(n.useState)(new Audio("/assets/audio/destruction.mp3")),a=Object(o.a)(c,1)[0],i=Object(n.useState)(!1),r=Object(o.a)(i,2),u=r[0],j=r[1],m=Object(n.useRef)();return Object(n.useEffect)((function(){a.play(),j(!0),setTimeout((function(){j(!1)}),100),setInterval((function(){j(!0),setTimeout((function(){j(!1)}),100)}),8e3),s()}),[]),Object(d.jsxs)(d.Fragment,{children:[u&&Object(d.jsx)(w,{}),Object(d.jsxs)("div",{className:"h-screen px-10 flex flex-col justify-center items-center text-white",children:[Object(d.jsx)("img",{style:{maxWidth:1e3},className:"w-full",src:"/assets/logo.svg",alt:"Babel's Code"}),Object(d.jsxs)("h1",{className:"heading-intro",children:["Welcome ",Object(d.jsx)("span",{ref:m,children:t})]}),Object(d.jsxs)("p",{className:"sentence-intro flex items-center gap-4",children:[Object(d.jsx)("img",{className:"h-4",src:"/assets/terminal.svg",alt:""})," It's time to unlock the universe's secret..."]}),Object(d.jsxs)("p",{className:"sentence-intro flex items-center gap-4",children:[Object(d.jsx)("img",{className:"h-4",src:"/assets/terminal.svg",alt:""})," Don't be afraid to lose your mind..."]}),Object(d.jsxs)(l.b,{className:"btn-intro",to:"/general",children:[Object(d.jsx)("img",{src:"/assets/user.svg",alt:""})," Got it"]})]})]})});s(307);var D=function(){var e=Object(n.useState)(new Audio("/assets/audio/intro.mp3")),t=Object(o.a)(e,1)[0],s=Object(n.useState)(new Audio("/assets/audio/waspdance.mp3")),c=Object(o.a)(s,1)[0],a=Object(n.useState)(!0),i=Object(o.a)(a,2),r=i[0],m=i[1],f=Object(n.useState)(null),O=Object(o.a)(f,2),h=O[0],x=O[1],g=Object(n.useState)(""),p=Object(o.a)(g,2),v=p[0],y=p[1];return Object(n.useEffect)((function(){var e=u()("https://whispering-chamber-09886.herokuapp.com");return x(e),function(){return e.close()}}),[x]),Object(d.jsx)(l.a,{children:Object(d.jsxs)(j.c,{children:[Object(d.jsx)(j.a,{path:"/general",children:Object(d.jsx)(A,{fnToggleAudio:function(){r?t.pause():t.play(),m(!r)},audioState:r,socket:h,username:v,setUsername:y,fnAudioChaos:function(){t.pause(),c.play()}})}),Object(d.jsx)(j.a,{path:"/intro",children:Object(d.jsx)(M,{fnAudio:function(){t.play()},username:v})}),Object(d.jsx)(j.a,{exact:!0,path:"/",children:Object(d.jsx)(b,{socket:h,username:v,setUsername:y})})]})})},T=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,312)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;s(e),n(e),c(e),a(e),i(e)}))};i.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(D,{})}),document.getElementById("root")),T()}},[[308,1,2]]]);
//# sourceMappingURL=main.f67451d3.chunk.js.map